"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/tidycal/suggest";
exports.ids = ["pages/api/tidycal/suggest"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftidycal%2Fsuggest&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ctidycal%5Csuggest.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftidycal%2Fsuggest&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ctidycal%5Csuggest.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_tidycal_suggest_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages\\api\\tidycal\\suggest.js */ \"(api-node)/./pages/api/tidycal/suggest.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_tidycal_suggest_js__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_tidycal_suggest_js__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/tidycal/suggest\",\n        pathname: \"/api/tidycal/suggest\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_tidycal_suggest_js__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/tidycal/suggest\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/tidycal/suggest\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdGlkeWNhbCUyRnN1Z2dlc3QmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3RpZHljYWwlNUNzdWdnZXN0LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNDO0FBQ3VDO0FBQ3JDO0FBQzFEO0FBQzhEO0FBQ1U7QUFDRjtBQUN0RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDBEQUFRO0FBQ3BDO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9ELENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQixFQUFFLEVBRTFCO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdEQUF3RDtBQUNwRTtBQUNBO0FBQ0EsdUJBQXVCLDRFQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDZDQUE2QyxFQUE2QztBQUMxRiw0Q0FBNEMsS0FBd0M7QUFDcEYsaUNBQWlDLEtBQW9DO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFFQUFTO0FBQ2pCLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZW5kRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcGktdXRpbHNcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHRpZHljYWxcXFxcc3VnZ2VzdC5qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90aWR5Y2FsL3N1Z2dlc3RcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90aWR5Y2FsL3N1Z2dlc3RcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZCxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJydcbn0pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL3RpZHljYWwvc3VnZ2VzdFwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcXVlcnksIHBhcmFtcywgcHJlcmVuZGVyTWFuaWZlc3QsIHJvdXRlclNlcnZlckNvbnRleHQgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICAgICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgICAgIGNvbnN0IG9uUmVxdWVzdEVycm9yID0gcm91dGVNb2R1bGUuaW5zdHJ1bWVudGF0aW9uT25SZXF1ZXN0RXJyb3IuYmluZChyb3V0ZU1vZHVsZSk7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT5yb3V0ZU1vZHVsZS5yZW5kZXIocmVxLCByZXMsIHtcbiAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAuLi5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgYWxsb3dlZFJldmFsaWRhdGVIZWFkZXJLZXlzOiBwcm9jZXNzLmVudi5fX05FWFRfQUxMT1dFRF9SRVZBTElEQVRFX0hFQURFUlMsXG4gICAgICAgICAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlOiBCb29sZWFuKHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREUpLFxuICAgICAgICAgICAgICAgIHRydXN0SG9zdEhlYWRlcjogcHJvY2Vzcy5lbnYuX19ORVhUX1RSVVNUX0hPU1RfSEVBREVSLFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGdldCB0aGlzIGZyb20gZnJvbSBydW50aW1lIGVudiBzbyBtYW5pZmVzdFxuICAgICAgICAgICAgICAgIC8vIGRvZXNuJ3QgbmVlZCB0byBsb2FkXG4gICAgICAgICAgICAgICAgcHJldmlld1Byb3BzOiBwcmVyZW5kZXJNYW5pZmVzdC5wcmV2aWV3LFxuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZUVycm9yOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkZXY6IHJvdXRlTW9kdWxlLmlzRGV2LFxuICAgICAgICAgICAgICAgIHBhZ2U6IFwiL2FwaS90aWR5Y2FsL3N1Z2dlc3RcIixcbiAgICAgICAgICAgICAgICBpbnRlcm5hbFJldmFsaWRhdGU6IHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoLi4uYXJncyk9Pm9uUmVxdWVzdEVycm9yKHJlcSwgLi4uYXJncylcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGludm9rZVJvdXRlTW9kdWxlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gd2UgcmUtdGhyb3cgaW4gZGV2IHRvIHNob3cgdGhlIGVycm9yIG92ZXJsYXlcbiAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBhbiBpbnZhcmlhbnQgYXMgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gc2hvdWxkIGJlIGRvbmUgaW5zaWRlIG9mIGFwaS1yZXNvbHZlciBvbkVycm9yXG4gICAgICAgIHNlbmRFcnJvcihyZXMsIDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xuICAgIH0gZmluYWxseXtcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWxsb3cgYW55IHdhaXRVbnRpbCB3b3JrIGluIHBhZ2VzIEFQSSByb3V0ZXMgY3VycmVudGx5XG4gICAgICAgIC8vIHNvIGlmIGNhbGxiYWNrIGlzIHByZXNlbnQgcmV0dXJuIHdpdGggcmVzb2x2ZWQgcHJvbWlzZSBzaW5jZSBub1xuICAgICAgICAvLyBwZW5kaW5nIHdvcmtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftidycal%2Fsuggest&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ctidycal%5Csuggest.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/tidycal/suggest.js":
/*!**************************************!*\
  !*** ./pages/api/tidycal/suggest.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// api/tidycal.js — Vercel serverless version of TidyCal scheduling logic\nconst SLOT_RULES = {\n    types: {\n        tour: {\n            stepMins: 15,\n            url: \"https://tidycal.com/ddtenterpriseusa/15-minute-meeting\"\n        },\n        meeting: {\n            stepMins: 30,\n            url: \"https://tidycal.com/ddtenterpriseusa/30-minute-meeting\"\n        }\n    },\n    workingWindows: {\n        3: [\n            {\n                start: {\n                    h: 17,\n                    m: 0\n                },\n                end: {\n                    h: 20,\n                    m: 0\n                }\n            }\n        ],\n        6: [\n            {\n                start: {\n                    h: 11,\n                    m: 0\n                },\n                end: {\n                    h: 13,\n                    m: 0\n                }\n            }\n        ],\n        0: [\n            {\n                start: {\n                    h: 14,\n                    m: 0\n                },\n                end: {\n                    h: 16,\n                    m: 0\n                }\n            }\n        ]\n    },\n    bufferMins: 120\n};\nconst POLICY_SUMMARY = \"We currently schedule on Wednesday (5–8pm), Saturday (11am–1pm), and Sunday (2–4pm). \" + \"Tours are 15 minutes; meetings are 30 minutes.\";\n// ---------- helpers ----------\nconst pad2 = (n)=>String(n).padStart(2, \"0\");\nconst ymd = (d)=>`${d.getFullYear()}-${pad2(d.getMonth() + 1)}-${pad2(d.getDate())}`;\nconst isSameDay = (a, b)=>a.toDateString() === b.toDateString();\nconst addMinutes = (d, mins)=>new Date(d.getTime() + mins * 60000);\nconst addDays = (d, days)=>{\n    const x = new Date(d);\n    x.setDate(x.getDate() + days);\n    return x;\n};\nconst overlaps = (aStart, aEnd, bStart, bEnd)=>aStart < bEnd && aEnd > bStart;\nfunction parseYMD(dateStr) {\n    const [yy, mm, dd] = (dateStr || \"\").split(\"-\").map(Number);\n    const d = new Date();\n    if (!yy || !mm || !dd) {\n        d.setHours(0, 0, 0, 0);\n        return d;\n    }\n    d.setFullYear(yy, mm - 1, dd);\n    d.setHours(0, 0, 0, 0);\n    return d;\n}\nfunction setHhMm(base, hh, mm) {\n    const d = new Date(base);\n    d.setHours(hh, mm, 0, 0);\n    return d;\n}\nfunction alignToGrid(d, stepMins) {\n    const minutes = d.getMinutes();\n    const over = minutes % stepMins;\n    if (over === 0) return d;\n    return addMinutes(d, stepMins - over);\n}\nfunction formatHuman(d) {\n    return d.toLocaleString(\"en-US\", {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"2-digit\"\n    });\n}\nfunction windowsForDate(dateObj) {\n    return SLOT_RULES.workingWindows[dateObj.getDay()] || [];\n}\nfunction noon(dateObj) {\n    return setHhMm(dateObj, 12, 0);\n}\nasync function getAllBookingsJSON() {\n    const apiKey = process.env.TIDYCAL_API_KEY;\n    const resp = await fetch(\"https://tidycal.com/api/bookings\", {\n        headers: {\n            Authorization: `Bearer ${apiKey}`\n        }\n    });\n    const data = await resp.json();\n    return data?.data || [];\n}\nfunction buildCandidateWindows(dateObj, typeKey, preference) {\n    const all = windowsForDate(dateObj);\n    const stepMins = SLOT_RULES.types[typeKey].stepMins;\n    if (!all.length) return [];\n    const cand = [];\n    for (const w of all){\n        const ws = setHhMm(dateObj, w.start.h, w.start.m);\n        const we = setHhMm(dateObj, w.end.h, w.end.m);\n        const latestStart = addMinutes(we, -stepMins);\n        if (latestStart < ws) continue;\n        const n = noon(dateObj);\n        let start = ws, endStart = latestStart;\n        if (preference === \"morning\") {\n            endStart = addMinutes(n, -stepMins);\n            if (endStart < ws) continue;\n        } else if (preference === \"afternoon\") {\n            if (latestStart < n) continue;\n            start = n > ws ? n : ws;\n        }\n        cand.push({\n            start,\n            endStart,\n            stepMins\n        });\n    }\n    return cand;\n}\nfunction findSlotsForDay({ dateObj, typeKey, preference, bookings, afterISO, count = 1, strategy = \"first\" }) {\n    const windows = buildCandidateWindows(dateObj, typeKey, preference);\n    if (!windows.length) return {\n        slots: [],\n        hadWindows: false\n    };\n    const now = new Date();\n    const isToday = isSameDay(now, dateObj);\n    const candidates = [];\n    for (const w of windows){\n        let minStart = new Date(w.start);\n        if (afterISO) {\n            let after = /^\\d{1,2}:\\d{2}$/.test(afterISO) ? setHhMm(dateObj, ...afterISO.split(\":\").map(Number)) : new Date(afterISO);\n            if (isSameDay(after, dateObj) && after > minStart) minStart = after;\n        }\n        if (isToday) {\n            const cutoff = alignToGrid(addMinutes(now, SLOT_RULES.bufferMins), w.stepMins);\n            if (cutoff > minStart) minStart = cutoff;\n        }\n        minStart = alignToGrid(minStart, w.stepMins);\n        for(let cur = new Date(minStart); cur <= w.endStart; cur = addMinutes(cur, w.stepMins)){\n            const end = addMinutes(cur, w.stepMins);\n            const bad = bookings.some((b)=>{\n                const bs = new Date(b.starts_at), be = new Date(b.ends_at);\n                return overlaps(cur, end, bs, be);\n            });\n            if (!bad) candidates.push({\n                start: new Date(cur),\n                end\n            });\n        }\n    }\n    if (!candidates.length) return {\n        slots: [],\n        hadWindows: true\n    };\n    let ordered = candidates.slice().sort((a, b)=>a.start - b.start);\n    if (strategy === \"last\") ordered = ordered.slice(-count);\n    else ordered = ordered.slice(0, count);\n    return {\n        slots: ordered.map(({ start, end })=>({\n                start: start.toISOString(),\n                end: end.toISOString(),\n                human: formatHuman(start)\n            })),\n        hadWindows: true\n    };\n}\nfunction findNextAvailableForward({ startDateObj, typeKey, preference, bookings, afterISO, count = 3 }) {\n    for(let i = 0; i < 60; i++){\n        const dateObj = addDays(startDateObj, i);\n        const res = findSlotsForDay({\n            dateObj,\n            typeKey,\n            preference,\n            bookings,\n            afterISO,\n            count\n        });\n        if (res.slots.length) {\n            return {\n                dateYMD: ymd(dateObj),\n                options: res.slots\n            };\n        }\n    }\n    return null;\n}\nasync function handler(req, res) {\n    if (req.method !== \"GET\") return res.status(405).json({\n        error: \"Method not allowed\"\n    });\n    try {\n        const apiKey = process.env.TIDYCAL_API_KEY;\n        if (!apiKey) return res.status(500).json({\n            error: \"Missing TidyCal API key\"\n        });\n        const type = String(req.query.type || \"meeting\").toLowerCase();\n        const preference = String(req.query.preference || \"\").toLowerCase();\n        const dateStr = String(req.query.date || ymd(new Date()));\n        const afterISO = req.query.after ? String(req.query.after) : \"\";\n        const count = Math.max(1, Math.min(5, Number(req.query.count) || 1));\n        const strategy = String(req.query.strategy || \"first\").toLowerCase();\n        if (!SLOT_RULES.types[type]) {\n            return res.status(400).json({\n                error: \"Invalid booking type\"\n            });\n        }\n        const dateObj = parseYMD(dateStr);\n        const bookings = await getAllBookingsJSON();\n        const windows = windowsForDate(dateObj);\n        if (!windows.length) {\n            const next = findNextAvailableForward({\n                startDateObj: addDays(dateObj, 1),\n                typeKey: type,\n                preference,\n                bookings,\n                afterISO\n            });\n            return res.status(403).json({\n                error: \"Closed day\",\n                closedDay: true,\n                policy: POLICY_SUMMARY,\n                type,\n                preference,\n                dateYMD: ymd(dateObj),\n                bookingUrl: SLOT_RULES.types[type].url,\n                nextAvailable: next\n            });\n        }\n        const { slots, hadWindows } = findSlotsForDay({\n            dateObj,\n            typeKey: type,\n            preference,\n            bookings,\n            afterISO,\n            count,\n            strategy\n        });\n        if (!slots.length) {\n            const next = findNextAvailableForward({\n                startDateObj: addDays(dateObj, 1),\n                typeKey: type,\n                preference,\n                bookings,\n                afterISO\n            });\n            return res.status(404).json({\n                error: hadWindows ? \"Fully booked\" : \"Closed day\",\n                fullyBooked: hadWindows,\n                closedDay: !hadWindows,\n                policy: POLICY_SUMMARY,\n                type,\n                preference,\n                dateYMD: ymd(dateObj),\n                bookingUrl: SLOT_RULES.types[type].url,\n                nextAvailable: next\n            });\n        }\n        const primary = slots[0];\n        return res.status(200).json({\n            type,\n            preference,\n            dateYMD: ymd(dateObj),\n            bookingUrl: SLOT_RULES.types[type].url,\n            options: slots,\n            start: primary.start,\n            end: primary.end,\n            human: primary.human,\n            policy: POLICY_SUMMARY\n        });\n    } catch (err) {\n        console.error(\"❌ /api/tidycal error:\", err);\n        return res.status(500).json({\n            error: \"Failed to suggest a time\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS90aWR5Y2FsL3N1Z2dlc3QuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHlFQUF5RTtBQUV6RSxNQUFNQSxhQUFhO0lBQ2pCQyxPQUFPO1FBQ0xDLE1BQVM7WUFBRUMsVUFBVTtZQUFJQyxLQUFLO1FBQXlEO1FBQ3ZGQyxTQUFTO1lBQUVGLFVBQVU7WUFBSUMsS0FBSztRQUF5RDtJQUN6RjtJQUNBRSxnQkFBZ0I7UUFDZCxHQUFHO1lBQUM7Z0JBQUVDLE9BQU87b0JBQUVDLEdBQUc7b0JBQUlDLEdBQUc7Z0JBQUU7Z0JBQUdDLEtBQUs7b0JBQUVGLEdBQUc7b0JBQUlDLEdBQUc7Z0JBQUU7WUFBRTtTQUFFO1FBQ3JELEdBQUc7WUFBQztnQkFBRUYsT0FBTztvQkFBRUMsR0FBRztvQkFBSUMsR0FBRztnQkFBRTtnQkFBR0MsS0FBSztvQkFBRUYsR0FBRztvQkFBSUMsR0FBRztnQkFBRTtZQUFFO1NBQUU7UUFDckQsR0FBRztZQUFDO2dCQUFFRixPQUFPO29CQUFFQyxHQUFHO29CQUFJQyxHQUFHO2dCQUFFO2dCQUFHQyxLQUFLO29CQUFFRixHQUFHO29CQUFJQyxHQUFHO2dCQUFFO1lBQUU7U0FBRTtJQUN2RDtJQUNBRSxZQUFZO0FBQ2Q7QUFFQSxNQUFNQyxpQkFDSiwwRkFDQTtBQUVGLGdDQUFnQztBQUNoQyxNQUFNQyxPQUFPLENBQUNDLElBQU1DLE9BQU9ELEdBQUdFLFFBQVEsQ0FBQyxHQUFHO0FBQzFDLE1BQU1DLE1BQU0sQ0FBQ0MsSUFBTSxHQUFHQSxFQUFFQyxXQUFXLEdBQUcsQ0FBQyxFQUFFTixLQUFLSyxFQUFFRSxRQUFRLEtBQUssR0FBRyxDQUFDLEVBQUVQLEtBQUtLLEVBQUVHLE9BQU8sS0FBSztBQUN0RixNQUFNQyxZQUFZLENBQUNDLEdBQUdDLElBQU1ELEVBQUVFLFlBQVksT0FBT0QsRUFBRUMsWUFBWTtBQUMvRCxNQUFNQyxhQUFhLENBQUNSLEdBQUdTLE9BQVMsSUFBSUMsS0FBS1YsRUFBRVcsT0FB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QVM7Z0JBQUllLFNBQVNpRDtnQkFBTWhEO2dCQUFZVztnQkFBVUM7WUFDMUU7WUFDQSxPQUFPNEIsSUFBSU0sTUFBTSxDQUFDLEtBQUtqRCxJQUFJLENBQUM7Z0JBQzFCa0QsT0FBTzlCLGFBQWEsaUJBQWlCO2dCQUFjMkMsYUFBYTNDO2dCQUNoRXVDLFdBQVcsQ0FBQ3ZDO2dCQUFZd0MsUUFBUTdIO2dCQUNoQ29IO2dCQUFNaEQ7Z0JBQVl5QyxTQUFTeEcsSUFBSStDO2dCQUMvQjBFLFlBQVkxSSxXQUFXQyxLQUFLLENBQUMrSCxLQUFLLENBQUM1SCxHQUFHO2dCQUN0Q3VJLGVBQWVKO1lBQ2pCO1FBQ0Y7UUFFQSxNQUFNTSxVQUFVN0MsS0FBSyxDQUFDLEVBQUU7UUFDeEIsT0FBT3dCLElBQUlNLE1BQU0sQ0FBQyxLQUFLakQsSUFBSSxDQUFDO1lBQzFCbUQ7WUFBTWhEO1lBQVl5QyxTQUFTeEcsSUFBSStDO1lBQy9CMEUsWUFBWTFJLFdBQVdDLEtBQUssQ0FBQytILEtBQUssQ0FBQzVILEdBQUc7WUFDdENzSCxTQUFTMUI7WUFBT3pGLE9BQU9zSSxRQUFRdEksS0FBSztZQUFFRyxLQUFLbUksUUFBUW5JLEdBQUc7WUFDdEQwRyxPQUFPeUIsUUFBUXpCLEtBQUs7WUFBRXFCLFFBQVE3SDtRQUNoQztJQUNGLEVBQUUsT0FBT2tJLEtBQUs7UUFDWkMsUUFBUWhCLEtBQUssQ0FBQyx5QkFBeUJlO1FBQ3ZDLE9BQU90QixJQUFJTSxNQUFNLENBQUMsS0FBS2pELElBQUksQ0FBQztZQUFFa0QsT0FBTztRQUEyQjtJQUNsRTtBQUNGIiwic291cmNlcyI6WyJDOlxcY2hhdGJvdC1hcHBcXHBhZ2VzXFxhcGlcXHRpZHljYWxcXHN1Z2dlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBpL3RpZHljYWwuanMg4oCUIFZlcmNlbCBzZXJ2ZXJsZXNzIHZlcnNpb24gb2YgVGlkeUNhbCBzY2hlZHVsaW5nIGxvZ2ljXHJcblxyXG5jb25zdCBTTE9UX1JVTEVTID0ge1xyXG4gIHR5cGVzOiB7XHJcbiAgICB0b3VyOiAgICB7IHN0ZXBNaW5zOiAxNSwgdXJsOiBcImh0dHBzOi8vdGlkeWNhbC5jb20vZGR0ZW50ZXJwcmlzZXVzYS8xNS1taW51dGUtbWVldGluZ1wiIH0sXHJcbiAgICBtZWV0aW5nOiB7IHN0ZXBNaW5zOiAzMCwgdXJsOiBcImh0dHBzOi8vdGlkeWNhbC5jb20vZGR0ZW50ZXJwcmlzZXVzYS8zMC1taW51dGUtbWVldGluZ1wiIH0sXHJcbiAgfSxcclxuICB3b3JraW5nV2luZG93czoge1xyXG4gICAgMzogW3sgc3RhcnQ6IHsgaDogMTcsIG06IDAgfSwgZW5kOiB7IGg6IDIwLCBtOiAwIH0gfV0sIC8vIFdlZG5lc2RheSA14oCTOHBtXHJcbiAgICA2OiBbeyBzdGFydDogeyBoOiAxMSwgbTogMCB9LCBlbmQ6IHsgaDogMTMsIG06IDAgfSB9XSwgLy8gU2F0dXJkYXkgMTHigJMxcG1cclxuICAgIDA6IFt7IHN0YXJ0OiB7IGg6IDE0LCBtOiAwIH0sIGVuZDogeyBoOiAxNiwgbTogMCB9IH1dLCAvLyBTdW5kYXkgMuKAkzRwbVxyXG4gIH0sXHJcbiAgYnVmZmVyTWluczogMTIwLFxyXG59O1xyXG5cclxuY29uc3QgUE9MSUNZX1NVTU1BUlkgPVxyXG4gIFwiV2UgY3VycmVudGx5IHNjaGVkdWxlIG9uIFdlZG5lc2RheSAoNeKAkzhwbSksIFNhdHVyZGF5ICgxMWFt4oCTMXBtKSwgYW5kIFN1bmRheSAoMuKAkzRwbSkuIFwiICtcclxuICBcIlRvdXJzIGFyZSAxNSBtaW51dGVzOyBtZWV0aW5ncyBhcmUgMzAgbWludXRlcy5cIjtcclxuXHJcbi8vIC0tLS0tLS0tLS0gaGVscGVycyAtLS0tLS0tLS0tXHJcbmNvbnN0IHBhZDIgPSAobikgPT4gU3RyaW5nKG4pLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuY29uc3QgeW1kID0gKGQpID0+IGAke2QuZ2V0RnVsbFllYXIoKX0tJHtwYWQyKGQuZ2V0TW9udGgoKSArIDEpfS0ke3BhZDIoZC5nZXREYXRlKCkpfWA7XHJcbmNvbnN0IGlzU2FtZURheSA9IChhLCBiKSA9PiBhLnRvRGF0ZVN0cmluZygpID09PSBiLnRvRGF0ZVN0cmluZygpO1xyXG5jb25zdCBhZGRNaW51dGVzID0gKGQsIG1pbnMpID0+IG5ldyBEYXRlKGQuZ2V0VGltZSgpICsgbWlucyAqIDYwMDAwKTtcclxuY29uc3QgYWRkRGF5cyA9IChkLCBkYXlzKSA9PiB7IGNvbnN0IHggPSBuZXcgRGF0ZShkKTsgeC5zZXREYXRlKHguZ2V0RGF0ZSgpICsgZGF5cyk7IHJldHVybiB4OyB9O1xyXG5jb25zdCBvdmVybGFwcyA9IChhU3RhcnQsIGFFbmQsIGJTdGFydCwgYkVuZCkgPT4gYVN0YXJ0IDwgYkVuZCAmJiBhRW5kID4gYlN0YXJ0O1xyXG5cclxuZnVuY3Rpb24gcGFyc2VZTUQoZGF0ZVN0cikge1xyXG4gIGNvbnN0IFt5eSwgbW0sIGRkXSA9IChkYXRlU3RyIHx8IFwiXCIpLnNwbGl0KFwiLVwiKS5tYXAoTnVtYmVyKTtcclxuICBjb25zdCBkID0gbmV3IERhdGUoKTtcclxuICBpZiAoIXl5IHx8ICFtbSB8fCAhZGQpIHtcclxuICAgIGQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICByZXR1cm4gZDtcclxuICB9XHJcbiAgZC5zZXRGdWxsWWVhcih5eSwgbW0gLSAxLCBkZCk7XHJcbiAgZC5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICByZXR1cm4gZDtcclxufVxyXG5mdW5jdGlvbiBzZXRIaE1tKGJhc2UsIGhoLCBtbSkge1xyXG4gIGNvbnN0IGQgPSBuZXcgRGF0ZShiYXNlKTtcclxuICBkLnNldEhvdXJzKGhoLCBtbSwgMCwgMCk7XHJcbiAgcmV0dXJuIGQ7XHJcbn1cclxuZnVuY3Rpb24gYWxpZ25Ub0dyaWQoZCwgc3RlcE1pbnMpIHtcclxuICBjb25zdCBtaW51dGVzID0gZC5nZXRNaW51dGVzKCk7XHJcbiAgY29uc3Qgb3ZlciA9IG1pbnV0ZXMgJSBzdGVwTWlucztcclxuICBpZiAob3ZlciA9PT0gMCkgcmV0dXJuIGQ7XHJcbiAgcmV0dXJuIGFkZE1pbnV0ZXMoZCwgc3RlcE1pbnMgLSBvdmVyKTtcclxufVxyXG5mdW5jdGlvbiBmb3JtYXRIdW1hbihkKSB7XHJcbiAgcmV0dXJuIGQudG9Mb2NhbGVTdHJpbmcoXCJlbi1VU1wiLCB7XHJcbiAgICB3ZWVrZGF5OiBcInNob3J0XCIsIG1vbnRoOiBcInNob3J0XCIsIGRheTogXCJudW1lcmljXCIsXHJcbiAgICBob3VyOiBcIm51bWVyaWNcIiwgbWludXRlOiBcIjItZGlnaXRcIlxyXG4gIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHdpbmRvd3NGb3JEYXRlKGRhdGVPYmopIHtcclxuICByZXR1cm4gU0xPVF9SVUxFUy53b3JraW5nV2luZG93c1tkYXRlT2JqLmdldERheSgpXSB8fCBbXTtcclxufVxyXG5mdW5jdGlvbiBub29uKGRhdGVPYmopIHtcclxuICByZXR1cm4gc2V0SGhNbShkYXRlT2JqLCAxMiwgMCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFsbEJvb2tpbmdzSlNPTigpIHtcclxuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5USURZQ0FMX0FQSV9LRVk7XHJcbiAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly90aWR5Y2FsLmNvbS9hcGkvYm9va2luZ3NcIiwge1xyXG4gICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXBpS2V5fWAgfSxcclxuICB9KTtcclxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcC5qc29uKCk7XHJcbiAgcmV0dXJuIGRhdGE/LmRhdGEgfHwgW107XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkQ2FuZGlkYXRlV2luZG93cyhkYXRlT2JqLCB0eXBlS2V5LCBwcmVmZXJlbmNlKSB7XHJcbiAgY29uc3QgYWxsID0gd2luZG93c0ZvckRhdGUoZGF0ZU9iaik7XHJcbiAgY29uc3Qgc3RlcE1pbnMgPSBTTE9UX1JVTEVTLnR5cGVzW3R5cGVLZXldLnN0ZXBNaW5zO1xyXG4gIGlmICghYWxsLmxlbmd0aCkgcmV0dXJuIFtdO1xyXG4gIGNvbnN0IGNhbmQgPSBbXTtcclxuICBmb3IgKGNvbnN0IHcgb2YgYWxsKSB7XHJcbiAgICBjb25zdCB3cyA9IHNldEhoTW0oZGF0ZU9iaiwgdy5zdGFydC5oLCB3LnN0YXJ0Lm0pO1xyXG4gICAgY29uc3Qgd2UgPSBzZXRIaE1tKGRhdGVPYmosIHcuZW5kLmgsIHcuZW5kLm0pO1xyXG4gICAgY29uc3QgbGF0ZXN0U3RhcnQgPSBhZGRNaW51dGVzKHdlLCAtc3RlcE1pbnMpO1xyXG4gICAgaWYgKGxhdGVzdFN0YXJ0IDwgd3MpIGNvbnRpbnVlO1xyXG4gICAgY29uc3QgbiA9IG5vb24oZGF0ZU9iaik7XHJcbiAgICBsZXQgc3RhcnQgPSB3cywgZW5kU3RhcnQgPSBsYXRlc3RTdGFydDtcclxuICAgIGlmIChwcmVmZXJlbmNlID09PSBcIm1vcm5pbmdcIikge1xyXG4gICAgICBlbmRTdGFydCA9IGFkZE1pbnV0ZXMobiwgLXN0ZXBNaW5zKTtcclxuICAgICAgaWYgKGVuZFN0YXJ0IDwgd3MpIGNvbnRpbnVlO1xyXG4gICAgfSBlbHNlIGlmIChwcmVmZXJlbmNlID09PSBcImFmdGVybm9vblwiKSB7XHJcbiAgICAgIGlmIChsYXRlc3RTdGFydCA8IG4pIGNvbnRpbnVlO1xyXG4gICAgICBzdGFydCA9IG4gPiB3cyA/IG4gOiB3cztcclxuICAgIH1cclxuICAgIGNhbmQucHVzaCh7IHN0YXJ0LCBlbmRTdGFydCwgc3RlcE1pbnMgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBjYW5kO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kU2xvdHNGb3JEYXkoeyBkYXRlT2JqLCB0eXBlS2V5LCBwcmVmZXJlbmNlLCBib29raW5ncywgYWZ0ZXJJU08sIGNvdW50ID0gMSwgc3RyYXRlZ3kgPSBcImZpcnN0XCIgfSkge1xyXG4gIGNvbnN0IHdpbmRvd3MgPSBidWlsZENhbmRpZGF0ZVdpbmRvd3MoZGF0ZU9iaiwgdHlwZUtleSwgcHJlZmVyZW5jZSk7XHJcbiAgaWYgKCF3aW5kb3dzLmxlbmd0aCkgcmV0dXJuIHsgc2xvdHM6IFtdLCBoYWRXaW5kb3dzOiBmYWxzZSB9O1xyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgaXNUb2RheSA9IGlzU2FtZURheShub3csIGRhdGVPYmopO1xyXG4gIGNvbnN0IGNhbmRpZGF0ZXMgPSBbXTtcclxuICBmb3IgKGNvbnN0IHcgb2Ygd2luZG93cykge1xyXG4gICAgbGV0IG1pblN0YXJ0ID0gbmV3IERhdGUody5zdGFydCk7XHJcbiAgICBpZiAoYWZ0ZXJJU08pIHtcclxuICAgICAgbGV0IGFmdGVyID0gL15cXGR7MSwyfTpcXGR7Mn0kLy50ZXN0KGFmdGVySVNPKVxyXG4gICAgICAgID8gc2V0SGhNbShkYXRlT2JqLCAuLi5hZnRlcklTTy5zcGxpdChcIjpcIikubWFwKE51bWJlcikpXHJcbiAgICAgICAgOiBuZXcgRGF0ZShhZnRlcklTTyk7XHJcbiAgICAgIGlmIChpc1NhbWVEYXkoYWZ0ZXIsIGRhdGVPYmopICYmIGFmdGVyID4gbWluU3RhcnQpIG1pblN0YXJ0ID0gYWZ0ZXI7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNUb2RheSkge1xyXG4gICAgICBjb25zdCBjdXRvZmYgPSBhbGlnblRvR3JpZChhZGRNaW51dGVzKG5vdywgU0xPVF9SVUxFUy5idWZmZXJNaW5zKSwgdy5zdGVwTWlucyk7XHJcbiAgICAgIGlmIChjdXRvZmYgPiBtaW5TdGFydCkgbWluU3RhcnQgPSBjdXRvZmY7XHJcbiAgICB9XHJcbiAgICBtaW5TdGFydCA9IGFsaWduVG9HcmlkKG1pblN0YXJ0LCB3LnN0ZXBNaW5zKTtcclxuICAgIGZvciAobGV0IGN1ciA9IG5ldyBEYXRlKG1pblN0YXJ0KTsgY3VyIDw9IHcuZW5kU3RhcnQ7IGN1ciA9IGFkZE1pbnV0ZXMoY3VyLCB3LnN0ZXBNaW5zKSkge1xyXG4gICAgICBjb25zdCBlbmQgPSBhZGRNaW51dGVzKGN1ciwgdy5zdGVwTWlucyk7XHJcbiAgICAgIGNvbnN0IGJhZCA9IGJvb2tpbmdzLnNvbWUoKGIpID0+IHtcclxuICAgICAgICBjb25zdCBicyA9IG5ldyBEYXRlKGIuc3RhcnRzX2F0KSwgYmUgPSBuZXcgRGF0ZShiLmVuZHNfYXQpO1xyXG4gICAgICAgIHJldHVybiBvdmVybGFwcyhjdXIsIGVuZCwgYnMsIGJlKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghYmFkKSBjYW5kaWRhdGVzLnB1c2goeyBzdGFydDogbmV3IERhdGUoY3VyKSwgZW5kIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoIWNhbmRpZGF0ZXMubGVuZ3RoKSByZXR1cm4geyBzbG90czogW10sIGhhZFdpbmRvd3M6IHRydWUgfTtcclxuICBsZXQgb3JkZXJlZCA9IGNhbmRpZGF0ZXMuc2xpY2UoKS5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7XHJcbiAgaWYgKHN0cmF0ZWd5ID09PSBcImxhc3RcIikgb3JkZXJlZCA9IG9yZGVyZWQuc2xpY2UoLWNvdW50KTtcclxuICBlbHNlIG9yZGVyZWQgPSBvcmRlcmVkLnNsaWNlKDAsIGNvdW50KTtcclxuICByZXR1cm4ge1xyXG4gICAgc2xvdHM6IG9yZGVyZWQubWFwKCh7IHN0YXJ0LCBlbmQgfSkgPT4gKHtcclxuICAgICAgc3RhcnQ6IHN0YXJ0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIGVuZDogZW5kLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIGh1bWFuOiBmb3JtYXRIdW1hbihzdGFydCksXHJcbiAgICB9KSksXHJcbiAgICBoYWRXaW5kb3dzOiB0cnVlLFxyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmROZXh0QXZhaWxhYmxlRm9yd2FyZCh7IHN0YXJ0RGF0ZU9iaiwgdHlwZUtleSwgcHJlZmVyZW5jZSwgYm9va2luZ3MsIGFmdGVySVNPLCBjb3VudCA9IDMgfSkge1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgNjA7IGkrKykge1xyXG4gICAgY29uc3QgZGF0ZU9iaiA9IGFkZERheXMoc3RhcnREYXRlT2JqLCBpKTtcclxuICAgIGNvbnN0IHJlcyA9IGZpbmRTbG90c0ZvckRheSh7IGRhdGVPYmosIHR5cGVLZXksIHByZWZlcmVuY2UsIGJvb2tpbmdzLCBhZnRlcklTTywgY291bnQgfSk7XHJcbiAgICBpZiAocmVzLnNsb3RzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4geyBkYXRlWU1EOiB5bWQoZGF0ZU9iaiksIG9wdGlvbnM6IHJlcy5zbG90cyB9O1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSBcIkdFVFwiKSByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogXCJNZXRob2Qgbm90IGFsbG93ZWRcIiB9KTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuVElEWUNBTF9BUElfS0VZO1xyXG4gICAgaWYgKCFhcGlLZXkpIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIk1pc3NpbmcgVGlkeUNhbCBBUEkga2V5XCIgfSk7XHJcblxyXG4gICAgY29uc3QgdHlwZSA9IFN0cmluZyhyZXEucXVlcnkudHlwZSB8fCBcIm1lZXRpbmdcIikudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IHByZWZlcmVuY2UgPSBTdHJpbmcocmVxLnF1ZXJ5LnByZWZlcmVuY2UgfHwgXCJcIikudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IGRhdGVTdHIgPSBTdHJpbmcocmVxLnF1ZXJ5LmRhdGUgfHwgeW1kKG5ldyBEYXRlKCkpKTtcclxuICAgIGNvbnN0IGFmdGVySVNPID0gcmVxLnF1ZXJ5LmFmdGVyID8gU3RyaW5nKHJlcS5xdWVyeS5hZnRlcikgOiBcIlwiO1xyXG4gICAgY29uc3QgY291bnQgPSBNYXRoLm1heCgxLCBNYXRoLm1pbig1LCBOdW1iZXIocmVxLnF1ZXJ5LmNvdW50KSB8fCAxKSk7XHJcbiAgICBjb25zdCBzdHJhdGVneSA9IFN0cmluZyhyZXEucXVlcnkuc3RyYXRlZ3kgfHwgXCJmaXJzdFwiKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgIGlmICghU0xPVF9SVUxFUy50eXBlc1t0eXBlXSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGJvb2tpbmcgdHlwZVwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRhdGVPYmogPSBwYXJzZVlNRChkYXRlU3RyKTtcclxuICAgIGNvbnN0IGJvb2tpbmdzID0gYXdhaXQgZ2V0QWxsQm9va2luZ3NKU09OKCk7XHJcbiAgICBjb25zdCB3aW5kb3dzID0gd2luZG93c0ZvckRhdGUoZGF0ZU9iaik7XHJcblxyXG4gICAgaWYgKCF3aW5kb3dzLmxlbmd0aCkge1xyXG4gICAgICBjb25zdCBuZXh0ID0gZmluZE5leHRBdmFpbGFibGVGb3J3YXJkKHtcclxuICAgICAgICBzdGFydERhdGVPYmo6IGFkZERheXMoZGF0ZU9iaiwgMSksIHR5cGVLZXk6IHR5cGUsIHByZWZlcmVuY2UsIGJvb2tpbmdzLCBhZnRlcklTTyxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XHJcbiAgICAgICAgZXJyb3I6IFwiQ2xvc2VkIGRheVwiLCBjbG9zZWREYXk6IHRydWUsIHBvbGljeTogUE9MSUNZX1NVTU1BUlksXHJcbiAgICAgICAgdHlwZSwgcHJlZmVyZW5jZSwgZGF0ZVlNRDogeW1kKGRhdGVPYmopLFxyXG4gICAgICAgIGJvb2tpbmdVcmw6IFNMT1RfUlVMRVMudHlwZXNbdHlwZV0udXJsLFxyXG4gICAgICAgIG5leHRBdmFpbGFibGU6IG5leHQsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgc2xvdHMsIGhhZFdpbmRvd3MgfSA9IGZpbmRTbG90c0ZvckRheSh7IGRhdGVPYmosIHR5cGVLZXk6IHR5cGUsIHByZWZlcmVuY2UsIGJvb2tpbmdzLCBhZnRlcklTTywgY291bnQsIHN0cmF0ZWd5IH0pO1xyXG4gICAgaWYgKCFzbG90cy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgbmV4dCA9IGZpbmROZXh0QXZhaWxhYmxlRm9yd2FyZCh7XHJcbiAgICAgICAgc3RhcnREYXRlT2JqOiBhZGREYXlzKGRhdGVPYmosIDEpLCB0eXBlS2V5OiB0eXBlLCBwcmVmZXJlbmNlLCBib29raW5ncywgYWZ0ZXJJU08sXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiBoYWRXaW5kb3dzID8gXCJGdWxseSBib29rZWRcIiA6IFwiQ2xvc2VkIGRheVwiLCBmdWxseUJvb2tlZDogaGFkV2luZG93cyxcclxuICAgICAgICBjbG9zZWREYXk6ICFoYWRXaW5kb3dzLCBwb2xpY3k6IFBPTElDWV9TVU1NQVJZLFxyXG4gICAgICAgIHR5cGUsIHByZWZlcmVuY2UsIGRhdGVZTUQ6IHltZChkYXRlT2JqKSxcclxuICAgICAgICBib29raW5nVXJsOiBTTE9UX1JVTEVTLnR5cGVzW3R5cGVdLnVybCxcclxuICAgICAgICBuZXh0QXZhaWxhYmxlOiBuZXh0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcmltYXJ5ID0gc2xvdHNbMF07XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICB0eXBlLCBwcmVmZXJlbmNlLCBkYXRlWU1EOiB5bWQoZGF0ZU9iaiksXHJcbiAgICAgIGJvb2tpbmdVcmw6IFNMT1RfUlVMRVMudHlwZXNbdHlwZV0udXJsLFxyXG4gICAgICBvcHRpb25zOiBzbG90cywgc3RhcnQ6IHByaW1hcnkuc3RhcnQsIGVuZDogcHJpbWFyeS5lbmQsXHJcbiAgICAgIGh1bWFuOiBwcmltYXJ5Lmh1bWFuLCBwb2xpY3k6IFBPTElDWV9TVU1NQVJZLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIC9hcGkvdGlkeWNhbCBlcnJvcjpcIiwgZXJyKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkZhaWxlZCB0byBzdWdnZXN0IGEgdGltZVwiIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiU0xPVF9SVUxFUyIsInR5cGVzIiwidG91ciIsInN0ZXBNaW5zIiwidXJsIiwibWVldGluZyIsIndvcmtpbmdXaW5kb3dzIiwic3RhcnQiLCJoIiwibSIsImVuZCIsImJ1ZmZlck1pbnMiLCJQT0xJQ1lfU1VNTUFSWSIsInBhZDIiLCJuIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJ5bWQiLCJkIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJpc1NhbWVEYXkiLCJhIiwiYiIsInRvRGF0ZVN0cmluZyIsImFkZE1pbnV0ZXMiLCJtaW5zIiwiRGF0ZSIsImdldFRpbWUiLCJhZGREYXlzIiwiZGF5cyIsIngiLCJzZXREYXRlIiwib3ZlcmxhcHMiLCJhU3RhcnQiLCJhRW5kIiwiYlN0YXJ0IiwiYkVuZCIsInBhcnNlWU1EIiwiZGF0ZVN0ciIsInl5IiwibW0iLCJkZCIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwic2V0SG91cnMiLCJzZXRGdWxsWWVhciIsInNldEhoTW0iLCJiYXNlIiwiaGgiLCJhbGlnblRvR3JpZCIsIm1pbnV0ZXMiLCJnZXRNaW51dGVzIiwib3ZlciIsImZvcm1hdEh1bWFuIiwidG9Mb2NhbGVTdHJpbmciLCJ3ZWVrZGF5IiwibW9udGgiLCJkYXkiLCJob3VyIiwibWludXRlIiwid2luZG93c0ZvckRhdGUiLCJkYXRlT2JqIiwiZ2V0RGF5Iiwibm9vbiIsImdldEFsbEJvb2tpbmdzSlNPTiIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJUSURZQ0FMX0FQSV9LRVkiLCJyZXNwIiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImRhdGEiLCJqc29uIiwiYnVpbGRDYW5kaWRhdGVXaW5kb3dzIiwidHlwZUtleSIsInByZWZlcmVuY2UiLCJhbGwiLCJsZW5ndGgiLCJjYW5kIiwidyIsIndzIiwid2UiLCJsYXRlc3RTdGFydCIsImVuZFN0YXJ0IiwicHVzaCIsImZpbmRTbG90c0ZvckRheSIsImJvb2tpbmdzIiwiYWZ0ZXJJU08iLCJjb3VudCIsInN0cmF0ZWd5Iiwid2luZG93cyIsInNsb3RzIiwiaGFkV2luZG93cyIsIm5vdyIsImlzVG9kYXkiLCJjYW5kaWRhdGVzIiwibWluU3RhcnQiLCJhZnRlciIsInRlc3QiLCJjdXRvZmYiLCJjdXIiLCJiYWQiLCJzb21lIiwiYnMiLCJzdGFydHNfYXQiLCJiZSIsImVuZHNfYXQiLCJvcmRlcmVkIiwic2xpY2UiLCJzb3J0IiwidG9JU09TdHJpbmciLCJodW1hbiIsImZpbmROZXh0QXZhaWxhYmxlRm9yd2FyZCIsInN0YXJ0RGF0ZU9iaiIsImkiLCJyZXMiLCJkYXRlWU1EIiwib3B0aW9ucyIsImhhbmRsZXIiLCJyZXEiLCJtZXRob2QiLCJzdGF0dXMiLCJlcnJvciIsInR5cGUiLCJxdWVyeSIsInRvTG93ZXJDYXNlIiwiZGF0ZSIsIk1hdGgiLCJtYXgiLCJtaW4iLCJuZXh0IiwiY2xvc2VkRGF5IiwicG9saWN5IiwiYm9va2luZ1VybCIsIm5leHRBdmFpbGFibGUiLCJmdWxseUJvb2tlZCIsInByaW1hcnkiLCJlcnIiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/tidycal/suggest.js\n");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftidycal%2Fsuggest&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ctidycal%5Csuggest.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();