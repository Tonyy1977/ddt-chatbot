(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6999)}])},6999:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__N_SSP:()=>W,default:()=>A});var a=n(7876),s=n(4232),o=n(1040);let r=[{question:["payment","how do i pay","pay rent","payment methods","pay online"],keywords:["payment","pay","online","methods"],answer:["Great question, rent payments are made simple through your resident portal. Please use link below if you are having any issues.",'<a href="https://ddtenterprise.org/rental-properties-2/" target="_blank" rel="noopener noreferrer">Resident Portal</a>'],followUps:{"how do i pay rent":["Great question, rent payments are made simple through your resident portal. Please use link below if you are having any issues.",'<a href="https://ddtenterprise.org/rental-properties-2/" target="_blank" rel="noopener noreferrer">Resident Portal</a>'],"when is payment due":"Rent payment is due on the 5th of each month. Late fees apply after that date.","what payment methods are accepted":"We accept debit cards, credit cards, and bank transfers through the Resident Portal."}},{question:["inspection","move-in inspection","home inspection","inspection deadline","inspection process"],keywords:["inspection","move-in","deadline","process"],answer:["Are you asking about when your move-in inspection is due, how often inspections are done, or what the inspection process includes? Please select one or ask more specifically."],followUps:{"when do i need to complete move-in inspection":"You need to complete the move-in inspection within 5 business days after moving in.","how often are inspections done":"DDT conducts an annual inspection and a semi-annual inspection during your lease.","what is the inspection process":"During inspection, we assess the condition of the property and any reported maintenance issues."}},{question:["pay rent","payment","house rent"],keywords:["rent","payment","house","miss"],answer:["Great question, rent payments are made simple through your resident portal. Please use link below if you are having any issues.",'<a href="https://ddtenterprise.org/rental-properties-2/" target="_blank" rel="noopener noreferrer">Resident Portal</a>'],followUps:{"when is rent due":["Rent is due on the 5th of each month. Late fees apply after that.","The late fee of $10 per day rent is late."],"how do i pay rent":["Great question, rent payments are made simple through your resident portal. Please use link below if you are having any issues.",'<a href="https://ddtenterprise.org/rental-properties-2/" target="_blank" rel="noopener noreferrer">Resident Portal</a>'],"what happens if i miss rent":["If you miss rent, you will be issued a 21 day eviction notice."," In your lease, it states if a problem is not rectified within 21 days, that the home can be re-leased to a paying tenant."]}},{question:["What are your rental requirements?","What do I need to qualify?","Can I tour the Norfolk unit? What do you look for in a tenant?","What’s needed to rent?"],keywords:["rental","requirements","qualify","tenant","tour","rent"],answer:["We conduct a best fit assessment based off all applicants. The requirements are:\n625 minimum credit score, Monthly income is 2.5 x rent, Background check, No previous evictions."]},{question:["I just applied. What now?","What happens after submitting the application?"],keywords:["apply","submitted","next step"],answer:"__BOOKING_TOUR_NEW__"},{question:["I paid the deposit — what now?","What happens after I send the deposit?"],keywords:["deposit paid","payment","security paid","paid"],answer:["I will place the home off the market now that the security deposit is paid. From there I will send you an email explaining follow-on instructions which will include a welcome letter, Move-in Inspection Document, and utilities transfer document."]},{question:["When do I get my deposit back?","How long to return deposit?","Will I get my deposit back?"],keywords:["deposit return","refund","return","security return"],answer:["At DDT Enterprise we state that security deposits will be returned no later than (30) days after your move out date. An inspection and neccesary repairs needs to be conducted prior to supporting the return of your deposit."]},{question:["When will I find out if I’m selected for the home?","How do I know if I got the rental?"],keywords:["selected","rental","application status","approval"],answer:["DDT will decide based on a best fit assessment along with the prerequisite requirements."]},{question:["When will I get the keys?","How do I access the house on move-in day?"],keywords:["keys","key","access","entry"],answer:["All homes managed by DDT Enterprise are encrypted with padded Electrical Locks. Once the pro-rated/1st month’s rent is paid, 4 hours prior to your move-in time (4:00 pm), you will receive the code to allot for your move-in."]},{question:["When can I tour the property?","How do I schedule a tour?","I want to come see the house","When is the tour available?"],keywords:["tour","visit","see","property","home"],answer:["__BOOKING_TOUR_AVAIL__"],type:"schedule_tour"},{question:["I missed my tour — can I reschedule?","I wasn’t able to make my appointment. Can I set another time?","Can I change my tour date?","I need to reschedule my tour"],keywords:["reschedule","missed","change","tour","appointment"],answer:["__BOOKING_TOUR_RESCHEDULE__"],type:"schedule_reschedule"},{question:["Schedule a meeting","Book a meeting with Demetrice","Set up a meeting with the landlord","I want to meet Demetrice","Schedule appointment with landlord"],keywords:["meeting","appointment","landlord","demetrice"],answer:["__BOOKING_MEETING_NEW__"],type:"schedule_meeting"},{question:["Why wasn’t I chosen for the unit?","Is there a reason I didn’t get approved?"],keywords:["not chosen","rejected","denied","approval"],answer:["At DDT Enterprise we conduct a best fit assessment off all applicants. We chose an applicant we determined to be a better fit for the home and in a more extremis situation. I will keep you in mind when our next rental comes available. Please sign up for our waitlist."]},{question:["After the tour, when can I move in?","When would I start the lease if approved?"],keywords:["move in","lease start","after tour"],answer:["It was great conducting a tour with you today, what would be your projected move-in date in the event you were selected?"]},{question:["There’s a leak, and my stuff is damaged. What should I do?","Water damage ruined my items, who’s responsible?"],keywords:["leak","water damage","reimbursement","responsible"],answer:["I am sorry to hear about this issue, rest assured we are working diligently to mitigate this issue. Regarding your potential reimbursement, please contact your renter’s insurance. Additionally, please place your maintenance issue in your Resident portal for more efficient updates and repair statuses."]},{question:["My AC is only blowing hot air, what do I do?","The air conditioner isn't cooling — help?"],keywords:["AC","air conditioner","cooling","hot air","oven","stove"],answer:["Thank you for the proper communication. Please place your maintenance issue in your Resident portal for more efficient updates and repair statuses."]},{question:["When do I need to complete the move-in inspection?","Deadline for submitting move-in inspection?"],keywords:["inspection","move-in","deadline"],answer:["Within (5) business days of move in date."]},{question:["How often does DDT inspect the home?","Will there be regular inspections?"],keywords:["inspection","home inspection","regular","annual","semi-annual"],answer:["DDT Enterprise conducts at least one Annual Inspection per year and a Semi-annual inspection during the 4–6-month mark of your initial lease."]},{question:["What are the move-out instructions?","What do I need to do before move-out?"],keywords:["move-out","move out","instructions","departure","cleaning"],answer:["Please have the home cleaned prior to your departure date. If you do not have a preferred cleaner (receipt required), we will use our preferred vendor to conduct the service.","Please place keys on the countertop of the home and leave the doors unlocked on the date of your departure unless specific instructions are specified by the manager.","Security deposits will be released within (30) days of the departure date.","Place lights and water out of your name on the day after your departure.","Notify the manager of any issues that you may have prior to your departure date.","Ensure all utilites remain on in the resident until the day after your lease concludes.","The cost for missing a service call is $85.00."]},{question:["How long does maintenance take?","When is routine maintenance?"],keywords:["maintenance","repair"],answer:["For routine repairs, we repair on the 25th – 29th every month.","For emergency repairs, they are done within 48 hours of request."]},{question:["Emergency","Emergency contact"],answer:["Please call us at (757) 408-7241"]},{question:["When do I find out if I got selected?","When is the selection finalized?"],keywords:["selection","approval","rental","decision"],answer:["DDT Enterprise chooses resident(s) on a best fit assessment at least (3) days before leased availability date."]},{question:["When can I renew my lease?","Can I start my renewal?"],keywords:["renew","lease renewal","contract"],answer:["If you are selected for renewal your renewal offer will be initiated with you within the (60) days prior to your lease expiring."]},{question:["what is the management fee","management fee","how much do you charge to manage a property","management cost"],keywords:["management","fee","cost","charge"],answer:["8% of monthly rent, which is 2% lower than market standard."]},{question:["what does ddt operate in its management regions","where does ddt operate","ddt management regions","what areas does ddt cover"],keywords:["ddt","operate","management","regions","areas","cover"],answer:["DDT operates throughout the entirety of the United States."]},{question:["who is the owner of ddt enterprise","who owns ddt","ddt enterprise owner"],keywords:["owner","ddt","enterprise","who"],answer:["Demetrice Thomas"]},{question:["What is the application fee?"],answer:["The application fee is $25"]},{question:["who is demetrice thomas","tell me about demetrice thomas","background of demetrice thomas","who owns ddt","who is he","who are they"],keywords:["demetrice","thomas","background"],answer:["He is a Navy veteran with over a decade of commercial and residential real estate experience."]},{question:["Can I speak to a person?","I want to talk to a live agent."],keywords:["speak","person","live agent","contact","customer service"],answer:["We would love to hear from you. Please use the link below.",'<a href="https://ddtenterprise.org/contact-us/" target="_blank" rel="noopener noreferrer">Contact Us</a>']},{question:["What happens if I pay rent late or only partially?"],answer:["Yes, late payments are fine, however any payment made after the 5th of the month late fees will be assessed."]},{question:["What should I do in case of flooding, fire, death, or criminal activity?"],answer:["Please call DDT immediately on (757) 408-7241"]},{question:["Can I bring my pet when I come for a tour?"],answer:["Your fur-baby is a part of your family, and we want to ensure that they are comfortable with the home as well, their vote counts!"]},{question:["What rentals are currently available?"],keywords:["available","rental available","Homes","Condominiums","properties","current"],answer:['<a href="https://ddtenterprise.org/resident-portal-2-2-2/" target="_blank" rel="noopener noreferrer">View Available Rentals</a>']},{question:["I'm having trouble placing a maintenance request","I can't request maintenance"],keywords:["maintenance","request","trouble","issue","form"],answer:['<a href="https://ddtenterprise.managebuilding.com/manager/app/tasks/add?taskTypeId=2" target="_blank" rel="noopener noreferrer">Submit Maintenance Request</a>']},{question:["Thomas Inspections","Does DDT partner with any companies?","partner inspection","who do you work with for inspections","Thomas Inspections, a nation wide Home Inspection Company","inspection partner"],keywords:["Thomas Inspections","partner"],answer:["Yes! DDT Enterprise proudly partners with Thomas Inspections, a nationwide home inspection company that helps us deliver exceptional service.",'<a href="https://www.thomasinspectionsva.com/" target="_blank" rel="noopener noreferrer">Visit Thomas Inspections</a>']},{question:["I cleaned, how can I receive my deposit?","cleaning receipt","cleaning proof","how to get security deposit back","great question, to receive your full security deposit you will need a professional cleaning (receipt required) as well as a Move Out Inspection"],keywords:["receipt","deposit","cleaning","proof"],answer:["To receive your full security deposit, please provide a cleaning receipt from a professional cleaning service.","Make sure the receipt includes date, address, and detailed services."]},{question:["discount","any deals","can i get a discount","military discount","promo code"],keywords:["discount","deal","promo","sale"],answer:["We currently do not offer any discounts or promotional rates.","Our pricing reflects the quality and value of our service."]},{question:["Who is the best property management company?"],answer:["DDT Enterprise"]},{question:["can we install ring doorbells","can i install doorbell","ring doorbell allowed"],keywords:["doorbell","install"],answer:["At DDT Enterprise, we want you to feel comfortable inside your house of course, you can install a doorbell for your home."]},{question:["can we paint the walls","can i paint the house","painting allowed"],keywords:["paint","walls"],answer:["At DDT Enterprise, we want you to feel comfortable inside your house of course, you can paint the house. We ask that once you terminate your lease that you restore the interior back to its original condition"]},{question:["where is your physical location","what is the address of ddt enterprise","do you have an office"],keywords:["location","address","physical","office"],answer:["DDT does not have a physical location; it is a completely remote property management company with local Agents and Brokers operating throughout the entire nation."]},{question:["What is DDT Enterprise responsible for?","What services does DDT offer?"],keywords:["responsible","services","management"],answer:["DDT Enterprise handles leasing, advertising, tenant screening, rent collection, maintenance coordination, and responding to emergency issues as part of its management services."]},{question:["Can DDT sign leases and accept deposits?","Does DDT represent owners for lease agreements?"],keywords:["sign leases","accept deposits","lease agreements"],answer:["Yes, DDT Enterprise is authorized to sign leases, accept deposits, and complete property checklists for residents."]},{question:["Does DDT inspect my property?","How often are inspections done?"],keywords:["inspect","property","inspection","move-in","move-out"],answer:["Yes, DDT Enterprise performs inspections at move-in, move-out, and conducts semiannual inspections."]},{question:["What happens if repairs are needed?","How does DDT handle repairs?"],keywords:["repair","repairs","fix","maintenance"],answer:["DDT handles repair coordination and may conduct emergency repairs up to $800 without Property owner approval."]},{question:["When is DDT available?","What are DDT’s business hours?"],keywords:["available","business hours","contact"],answer:["DDT Enterprise is available to tenants daily from 8 a.m. to 6 p.m., Monday through Sunday."]},{question:["How do I terminate the agreement?","Cancel property management agreement"],keywords:["terminate","cancel","end","agreement"],answer:["Either party may cancel with 30 days notice. The agreement can also be terminated immediately for serious issues."]},{question:["How are tenant complaints handled?","What happens when tenants complain?"],keywords:["complaint","complaints","issues","tenant"],answer:["DDT logs complaints, categorizes them, and informs owners about necessary repairs or actions."]},{question:["What's DDT slogan?"],answer:["Where community meets value."]},{question:["Is Micah a real person?"],answer:["Yes, my name is Micah Thomas from Marion, Arkansas"]},{question:["What is DDT Enterprise's vacancy rate?"],answer:["DDT Enterprise averages a 17 day (or less) vacany rate on average. We pride ourselves on ensuring we keep the best residents in the best homes at all times."]},{question:["My toilet is backed up."],answer:["I'm sorry to hear about that. Please place your maintenance issue in your Resident Portal for efficient updates and repair statuses. If it's an emergency, don't hesitate to call us directly at (757) 408-7241."]},{question:["How much is kept in the reserve account?"],answer:["	DDT Enterprise typically maintains a reserve amount of $800 for each property to handle any unexpected expenses or necessary repairs. This helps ensure prompt attention to any urgent maintenance issues. If you have any more questions about property management details, feel free to ask!"]},{question:["Pet fee?"],answer:["The pet fee at DDT Enterprise is $575 for a non-refundable deposit. If you have more questions about bringing your fur-baby with you, feel free to ask!"]}];var i=n(1423);let l="/api";function d(){let[e,t]=(0,s.useState)([]),[n,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(!0),[m,y]=(0,s.useState)(!1),[g,w]=(0,s.useState)(0),[f,x]=(0,s.useState)(null),v=(0,s.useRef)(null),b=(0,s.useRef)(null),k=(0,s.useRef)(null);(0,s.useEffect)(()=>{{let e=localStorage.getItem("micah-user");try{let t=JSON.parse(e);(null==t?void 0:t.name)&&(null==t?void 0:t.email)&&d(t)}catch(e){console.error("JSON parse error:",e)}}},[]),(0,s.useEffect)(()=>{if(!k.current){if(n)k.current="".concat(n.name,"-").concat(n.email);else if(1){let e=localStorage.getItem("micah-guest-session");e||(e="guest-".concat((0,i.A)()),localStorage.setItem("micah-guest-session",e)),k.current=e}}},[n]);let j=k.current;(0,s.useEffect)(()=>{(async()=>{try{let e=await o.A.get("".concat(l,"/history"),{params:{sessionId:j}}),n=Array.isArray(e.data)?e.data:[];t(n.length>0?n.map(e=>{let t=String(e.text);try{let e=JSON.parse(t);if((null==e?void 0:e.date)&&(null==e?void 0:e.time)&&(null==e?void 0:e.type)){let n=new Date("".concat(e.date,"T").concat(e.time,":00"));t="\uD83D\uDCC5 ".concat(e.type," scheduled for ").concat(n.toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}))}}catch(e){console.error("JSON parse error:",e)}return{sender:e.sender,text:t,type:"text",timestamp:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}):[{sender:"bot",text:"Hi, I'm Micah, DDT's virtual assistant. How can I help you today?",type:"text"}])}catch(e){t([{sender:"bot",text:"Hi, I'm Micah, DDT's virtual assistant. How can I help you today?",type:"text"}])}})()},[j]),(0,s.useEffect)(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[e.length]);let D=e=>{let n={...e,type:e.type||"text",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};t(e=>[...e,n])},I=async function(){var e,t,a,s,i,d,h,m,g,w,v,b,k,I;let T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,S=(T||"").trim();if(S){if(u(""),p(!1),D({sender:"user",text:S}),f){let t=S.split(/[,|]/).map(e=>e.trim());if(t.length>=2&&/\S+@\S+\.\S+/.test(t[1])){let n=t[0],a=t[1];try{let e=await o.A.post("".concat(l,"/tidycal/book"),{type:f.type,date:f.date,time:f.time,name:n,email:a,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone});201===e.status?D({sender:"bot",text:"Booked your ".concat(f.type," for ").concat(f.date," at ").concat(f.time,". A confirmation email has been sent.")}):409===e.status?D({sender:"bot",text:"Sorry, that timeslot is no longer available. Please choose another time."}):D({sender:"bot",text:"⚠️ Something went wrong. Please try again later."})}catch(t){(null==(e=t.response)?void 0:e.status)===409?D({sender:"bot",text:"That timeslot is already booked. Please try a different one."}):(console.error("Booking error:",t),D({sender:"bot",text:"I couldn’t connect to Calendar right now. Please try again later."}))}x(null);return}x(null)}try{y(!0);let e='\nYou are Micah, a friendly and helpful 28-year-old woman from Marion, Arkansas. \nYou are the virtual assistant for DDT Enterprise, a nationwide property management company. \nYou speak with light Southern charm and polite hospitality, but keep it professional and easy to understand. \nBe clear, concise, and helpful. Keep answers short — 2–3 sentences unless necessary.\n\n\uD83D\uDCC5 Scheduling Rules:\n- Users may request any day or time. Do not enforce scheduling windows yourself.\n- Always output the user’s requested booking as JSON with {type, date, time}, using the exact date/time they said.\n- The backend API will validate whether the request is inside scheduling windows, closed, or fully booked.\n- Tours = 15 minutes, Meetings = 30 minutes.\n\n- If the user provides only a vague reference (e.g., “this week,” “Wednesday evening,” “after 3”), politely ask them for the specific date and time?.\n- If the user already provides a clear date (e.g., “Wednesday, October 2” or “2025-09-28”), accept it and continue without asking again.\n- Never correct or shift the date yourself — trust the backend validation.\n- If a booking is requested, output ONLY valid JSON (no code blocks, no text). \n  Example: {"type":"meeting","date":"2025-09-28","time":"15:00"}\n\n\n\uD83D\uDEE1️ Boundaries:\n- Only answer property management and scheduling questions.\n- If off-topic, politely reply: \n  “I can only help with property management and scheduling. Can I check available times for you?”\n\n✅ Behavior:\n- Map “meet Demetrice” → meeting.  \n- Map “tour/showing/visit” → tour.  \n- Interpret times naturally: “after lunch,” “evening,” etc.\n- When confirming, also return structured JSON like:\n  {"type":"tour","date":"2025-09-24","time":"18:30"}\n\nFAQs: '.concat(JSON.stringify(r),"\n      "),c=[{role:"system",content:e},{role:"user",content:S}],u=(null==(i=(await o.A.post("".concat(l,"/chat"),{model:"gpt-4o",messages:c,sessionId:j})).data)||null==(s=i.choices)||null==(a=s[0])||null==(t=a.message)?void 0:t.content)||"",p=null;try{let e=u.match(/\{[^}]+\}/);e&&(p=JSON.parse(e[0]),u="")}catch(e){console.error("Booking JSON parse failed:",e),p=null}if((null==p?void 0:p.date)&&(null==p?void 0:p.time)&&(null==p?void 0:p.type))try{let e=null;try{e=null==(h=(await o.A.get("".concat(l,"/tidycal/suggest"),{params:{type:p.type,date:p.date,after:p.time,count:1}})).data)||null==(d=h.options)?void 0:d[0]}catch(e){if((null==(m=e.response)?void 0:m.status)===404)return void D({sender:"bot",text:"That day is fully booked. Please choose another date. Here’s the next available slot: "+((null==(k=e.response.data)||null==(b=k.nextAvailable)||null==(v=b.options)||null==(w=v[0])?void 0:w.human)||"none found")});if((null==(g=e.response)?void 0:g.status)===403)return void D({sender:"bot",text:"We don’t schedule on that day. "+((null==(I=e.response.data)?void 0:I.policy)||"")});console.error("Suggest error:",e),D({sender:"bot",text:"⚠️ Couldn’t check schedule right now. Please try again later."});return}if(!e)return void D({sender:"bot",text:"Sorry, no slots available. Try another day."});if(!(null==n?void 0:n.name)||!(null==n?void 0:n.email)){D({sender:"bot",text:"The slot ".concat(e.human," is available! Please provide your name and email to confirm.")}),x({type:p.type,date:e.date,time:e.time});return}let t=await o.A.post("".concat(l,"/tidycal/book"),{type:p.type,date:p.date,time:p.time,name:n.name,email:n.email,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone});201===t.status?D({sender:"bot",text:"Booked your ".concat(p.type," for ").concat(e.human,". A confirmation email has been sent.")}):409===t.status?D({sender:"bot",text:"That timeslot is no longer available. Please pick another time."}):D({sender:"bot",text:"I tried booking, but something went wrong. Please try again later."});return}catch(e){console.error("Booking error:",e),D({sender:"bot",text:"⚠️ Couldn’t check schedule. Try again later."});return}u?D({sender:"bot",text:u}):D({sender:"bot",text:"Sorry, something went wrong."})}catch(e){D({sender:"bot",text:"Server error, please try again."})}finally{y(!1),p(!0)}}};return(0,a.jsxs)("div",{className:"micah-chat",children:[(0,a.jsxs)("div",{className:"chat-wrapper",children:[(0,a.jsxs)("div",{className:"chat-box",style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,a.jsxs)("div",{className:"chat-header no-blur",children:[(0,a.jsxs)("div",{className:"header-left",children:[(0,a.jsx)("img",{src:"/micah-header.png",alt:"Micah Avatar",className:"header-avatar no-blur square-avatar"}),(0,a.jsxs)("div",{className:"header-info",children:[(0,a.jsx)("span",{className:"bot-name",children:"Micah"}),(0,a.jsx)("span",{className:"ai-badge",children:"AI"})]})]}),(0,a.jsx)("button",{className:"close-btn",onClick:()=>window.parent.postMessage("close-chat","*"),children:"\xd7"})]}),(0,a.jsxs)("div",{ref:v,className:"chat-body",style:{flex:1,overflowY:"auto",padding:"16px"},children:[e.map((e,t)=>{let n="bot"===e.sender;return(0,a.jsxs)("div",{className:"message-row ".concat(n?"bot-row":"user-row"),children:[n&&(0,a.jsx)("img",{src:"/bot-avatar.png",alt:"bot-avatar",className:"avatar no-blur"}),(0,a.jsxs)("div",{className:"message ".concat(n?"bot-msg":"user-msg"),children:["text"===e.type&&(0,a.jsx)("div",{className:"message-text",dangerouslySetInnerHTML:{__html:Array.isArray(e.text)?e.text.map(e=>"<div>".concat(e,"</div>")).join(""):"<div>".concat(e.text,"</div>")}}),(0,a.jsx)("span",{className:"timestamp",children:e.timestamp})]})]},t)}),m&&(0,a.jsx)("div",{className:"typing-indicator",children:"Micah is typing..."}),(0,a.jsx)("div",{ref:b}),!h&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"12px"},children:(0,a.jsx)("div",{className:"option-box",onClick:()=>{w(0),p(!0)},children:"Main Menu"})}),h&&(0,a.jsxs)("div",{className:"welcome-options",children:[0===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"option-box",onClick:()=>w(1),children:"General Housing Help"}),(0,a.jsx)("div",{className:"option-box",onClick:()=>{D({sender:"user",text:"Thomas Inspection"}),D({sender:"bot",text:'Thomas Inspections is a nationwide home inspection company. Learn more at <a href="https://www.thomasinspectionsva.com/" target="_blank" rel="noopener noreferrer">Visit Thomas Inspections</a>'}),p(!1)},children:"Thomas Inspection"}),(0,a.jsx)("div",{className:"option-box",onClick:()=>{p(!1),I("Rental Availability")},children:"Rental Availability"})]}),1===g&&(0,a.jsxs)(a.Fragment,{children:[["I have a question about rent","I’d like to ask about payment options","I need help with the application process","I’d like to schedule a property tour","I have an urgent or emergency concern"].map(e=>(0,a.jsx)("div",{className:"option-box",onClick:()=>I(e),children:e},e)),(0,a.jsx)("div",{className:"option-box",onClick:()=>w(0),children:"⬅ Back"})]})]})]})," ",(0,a.jsx)("div",{className:"chat-footer",children:(0,a.jsxs)("div",{className:"input-wrapper",children:[(0,a.jsx)("input",{type:"text",placeholder:"Type your message...",value:c,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key&&I()}),(0,a.jsx)("button",{className:"send-arrow-btn",onClick:()=>I(),children:(0,a.jsx)("span",{className:"send-arrow",children:"➤"})})]})})]})," "]}),"   "]})}var c=n(4007),u=n(5907),h=n(4069),p=n(570),m=n(7874),y=n(9493),g=n(7217),w=n(7075),f=n(2470),x=n(8246),v=n(3858),b=n(2320),k=n(2347),j=n(1462),D=n(4898),I=n(3028),T=n.n(I),S=n(4312);let q=["#8884d8","#82ca9d","#ffc658","#ff8042","#8dd1e1"],C=function(e){let{messages:t}=e,n=(0,s.useRef)(),o=async()=>{let e=await T()(n.current),t=e.toDataURL("image/png"),a=new S.Ay("p","mm","a4"),s=a.internal.pageSize.getWidth(),o=e.height*s/e.width;a.addImage(t,"PNG",0,0,s,o),a.save("Micah_Chat_Analytics_".concat(Date.now(),".pdf"))},r=(0,s.useMemo)(()=>{let e={};return t.forEach(t=>{var n;let a=(null==(n=t.topics)?void 0:n[0])||t.topic;a&&(e[a]=(e[a]||0)+1)}),Object.entries(e).map(e=>{let[t,n]=e;return{name:t,value:n}})},[t]);r.length;let i=(0,s.useMemo)(()=>{let e={};return t.forEach(t=>{let n=new Date(t.timestamp).toISOString().split("T")[0];e[n]=(e[n]||0)+1}),Object.entries(e).map(e=>{let[t,n]=e;return{date:t,count:n}})},[t]),l=(0,s.useMemo)(()=>[{name:"User",value:t.filter(e=>"user"===e.sender).length},{name:"Bot",value:t.filter(e=>"bot"===e.sender).length}],[t]),d=(0,s.useMemo)(()=>{let e={};return t.forEach(t=>{e[t.sessionId]=(e[t.sessionId]||0)+1}),Object.entries(e).map(e=>{let[t,n]=e;return{sessionId:t,count:n}}).sort((e,t)=>t.count-e.count).slice(0,5)},[t]),I=(0,s.useMemo)(()=>{let e=[...t].sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp)),n=[],a=0;return e.forEach(e=>{let t=new Date(e.timestamp).toISOString().split("T")[0];a++,n.push({date:t,total:a})}),Object.values(n.reduce((e,t)=>(e[t.date]=t,e),{}))},[t]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{textAlign:"right",marginBottom:"10px"},children:(0,a.jsx)("button",{onClick:o,children:"Download PDF"})}),(0,a.jsxs)("div",{ref:n,children:[(0,a.jsx)("h2",{style:{marginTop:"20px"},children:"\uD83D\uDCCA Chat Analytics Dashboard"}),(0,a.jsxs)("div",{style:{marginTop:"40px"},children:[(0,a.jsx)("h3",{children:"\uD83D\uDCC8 Messages Per Day"}),(0,a.jsx)(c.u,{width:"100%",height:250,children:(0,a.jsxs)(u.b,{data:i,children:[(0,a.jsx)(h.d,{stroke:"#ccc"}),(0,a.jsx)(p.W,{dataKey:"date"}),(0,a.jsx)(m.h,{}),(0,a.jsx)(y.m,{}),(0,a.jsx)(g.N,{type:"monotone",dataKey:"count",stroke:"#8884d8"})]})})]}),(0,a.jsxs)("div",{style:{marginTop:"40px"},children:[(0,a.jsx)("h3",{children:"\uD83E\uDDE0 Message Topic Breakdown"}),(0,a.jsx)(c.u,{width:"100%",height:250,children:(0,a.jsxs)(w.r,{children:[(0,a.jsx)(f.F,{data:r,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:e=>{let{name:t,percent:n}=e;return"".concat(t,": ").concat((100*n).toFixed(1),"%")},children:r.map((e,t)=>(0,a.jsx)(x.f,{fill:q[t%q.length]},"cell-".concat(t)))}),(0,a.jsx)(y.m,{}),(0,a.jsx)(v.s,{})]})})]}),(0,a.jsxs)("div",{style:{marginTop:"40px"},children:[(0,a.jsx)("h3",{children:"\uD83E\uDD67 User vs Bot Messages"}),(0,a.jsx)(c.u,{width:"100%",height:250,children:(0,a.jsxs)(w.r,{children:[(0,a.jsx)(f.F,{data:l,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:!0,children:l.map((e,t)=>(0,a.jsx)(x.f,{fill:q[t%q.length]},"cell-".concat(t)))}),(0,a.jsx)(y.m,{}),(0,a.jsx)(v.s,{})]})})]}),(0,a.jsxs)("div",{style:{marginTop:"40px"},children:[(0,a.jsx)("h3",{children:"\uD83D\uDCC9 Top 5 Active Sessions"}),(0,a.jsx)(c.u,{width:"100%",height:250,children:(0,a.jsxs)(b.E,{data:d,children:[(0,a.jsx)(h.d,{strokeDasharray:"3 3"}),(0,a.jsx)(p.W,{dataKey:"sessionId"}),(0,a.jsx)(m.h,{}),(0,a.jsx)(y.m,{}),(0,a.jsx)(k.y,{dataKey:"count",fill:"#82ca9d"})]})})]}),(0,a.jsxs)("div",{style:{marginTop:"40px"},children:[(0,a.jsx)("h3",{children:"\uD83D\uDCE6 Cumulative Message Growth"}),(0,a.jsx)(c.u,{width:"100%",height:250,children:(0,a.jsxs)(j.Q,{data:I,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),(0,a.jsx)(p.W,{dataKey:"date"}),(0,a.jsx)(m.h,{}),(0,a.jsx)(h.d,{strokeDasharray:"3 3"}),(0,a.jsx)(y.m,{}),(0,a.jsx)(D.Gk,{type:"monotone",dataKey:"total",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorTotal)"})]})})]})]})]})},E=function(){let[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)(""),[d,c]=(0,s.useState)("All"),[u,h]=(0,s.useState)("All"),[p,m]=(0,s.useState)([]),[y,g]=(0,s.useState)(""),[w,f]=(0,s.useState)(""),[x,v]=(0,s.useState)(null),[b,k]=(0,s.useState)("history"),[j,D]=(0,s.useState)(!1),[I,T]=(0,s.useState)({email:"",password:""});(0,s.useEffect)(()=>{"true"===localStorage.getItem("micah-admin-auth")&&D(!0)},[]);let S=async()=>{try{(await o.A.post("/api/admin/login",I)).data.success?(localStorage.setItem("micah-admin-auth","true"),D(!0)):alert("❌ Invalid credentials")}catch(e){alert("❌ Login failed")}},q=async()=>{try{let e=await o.A.get("/api/messages");console.log("\uD83D\uDCE6 Full response:",e.data);let n=Array.isArray(e.data)?e.data:[];t(n),r(n);let a=[...new Set(n.map(e=>e.sessionId))];m(a)}catch(e){console.error("❌ Failed to load messages:",e)}},E=async()=>{try{let e=await o.A.get("/api/analytics/summary");v(e.data)}catch(e){console.error("❌ Failed to load analytics summary:",e)}};return((0,s.useEffect)(()=>{E(),q()},[]),(0,s.useEffect)(()=>{let t=[...e];if("All"!==d&&(t=t.filter(e=>e.sender.toLowerCase()===d.toLowerCase())),"All"!==u&&(t=t.filter(e=>e.sessionId===u)),i.trim()&&(t=t.filter(e=>e.text.toLowerCase().includes(i.toLowerCase())||e.sessionId.toLowerCase().includes(i.toLowerCase()))),y&&w){let e=new Date(y),n=new Date(w);t=t.filter(t=>{let a=new Date(t.timestamp);return a>=e&&a<=n})}r(t)},[d,u,i,y,w,e]),j)?(0,a.jsxs)("div",{style:{padding:"20px"},children:[(0,a.jsx)("h1",{children:"Micah Admin Dashboard"}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsx)("button",{onClick:()=>k("history"),style:{marginRight:"10px"},children:"Chat History"}),(0,a.jsx)("button",{onClick:()=>k("graph"),children:"Graph"})]}),"history"===b&&(0,a.jsx)("button",{onClick:()=>{let t=[["Session ID","Sender","Text","Timestamp","Topic"]];e.forEach(e=>{var n;t.push([e.sessionId||"",e.sender||"",'"'.concat((null==(n=e.text)?void 0:n.toString().replace(/"/g,'""'))||"",'"'),e.timestamp||"",e.topic||""])});let n=new Blob([t.map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.setAttribute("download","Micah_Chat_History_".concat(Date.now(),".csv")),document.body.appendChild(s),s.click(),document.body.removeChild(s)},style:{marginLeft:"10px"},children:"Export CSV"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("micah-admin-auth"),window.location.href="/?mode=admin"},style:{position:"absolute",top:20,right:20,backgroundColor:"#f44336",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer"},children:"Logout"}),(0,a.jsxs)("div",{style:{marginBottom:"20px",background:"#f3f3f3",padding:"15px",borderRadius:"10px"},children:[(0,a.jsx)("h3",{children:"\uD83D\uDCC8 Quick Analytics"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Messages:"})," ",n.length]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Unique Sessions:"})," ",[...new Set(n.map(e=>e.sessionId))].length]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"User Messages:"})," ",n.filter(e=>"user"===e.sender).length]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Bot Messages:"})," ",n.filter(e=>"bot"===e.sender).length]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Summary:"})," ",x?JSON.stringify(x):"loading..."]})]}),"graph"===b&&(0,a.jsx)(C,{messages:n}),"history"===b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"15px",marginBottom:"20px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:(0,a.jsx)("strong",{children:"Sender:"})}),(0,a.jsx)("br",{}),(0,a.jsxs)("select",{value:d,onChange:e=>c(e.target.value),children:[(0,a.jsx)("option",{children:"All"}),(0,a.jsx)("option",{children:"User"}),(0,a.jsx)("option",{children:"Bot"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:(0,a.jsx)("strong",{children:"Session ID:"})}),(0,a.jsx)("br",{}),(0,a.jsxs)("select",{value:u,onChange:e=>h(e.target.value),children:[(0,a.jsx)("option",{children:"All"}),p.map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:(0,a.jsx)("strong",{children:"Search:"})}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{type:"text",placeholder:"Enter keyword...",value:i,onChange:e=>l(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:(0,a.jsx)("strong",{children:"Start Date:"})}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{type:"date",value:y,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:(0,a.jsx)("strong",{children:"End Date:"})}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{type:"date",value:w,onChange:e=>f(e.target.value)})]})]}),0===n.length?(0,a.jsx)("p",{children:"No messages found."}):(0,a.jsxs)("table",{border:"1",cellPadding:"10",style:{width:"100%"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Session"}),(0,a.jsx)("th",{children:"Sender"}),(0,a.jsx)("th",{children:"Message"}),(0,a.jsx)("th",{children:"Time"})]})}),(0,a.jsx)("tbody",{children:n.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.sessionId}),(0,a.jsx)("td",{style:{fontWeight:"bold"},children:"bot"===e.sender?"Bot":"User"}),(0,a.jsx)("td",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.text}),(0,a.jsx)("td",{children:new Date(e.timestamp).toLocaleString()})]},t))})]})]})]}):(0,a.jsxs)("div",{style:{padding:"20px"},children:[(0,a.jsx)("h2",{children:"\uD83D\uDD10 Admin Login"}),(0,a.jsx)("input",{type:"email",placeholder:"Email",value:I.email,onChange:e=>T({...I,email:e.target.value}),style:{marginBottom:"10px",display:"block"}}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:I.password,onChange:e=>T({...I,password:e.target.value}),style:{marginBottom:"10px",display:"block"}}),(0,a.jsx)("button",{onClick:S,children:"Login"})]})},N=()=>{let[e,t]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=setTimeout(()=>t(!1),4e3);return()=>clearTimeout(e)},[]),(0,a.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%",background:"transparent",display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"10px",boxSizing:"border-box",overflow:"visible"},children:[e&&(0,a.jsx)("div",{style:{position:"absolute",bottom:"80px",right:"0",background:"#fff",padding:"10px 14px",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",fontSize:"14px",maxWidth:"220px",color:"#333"},children:"Hi, I'm Micah, DDT's virtual assistant. How can I help you today?"}),(0,a.jsx)("button",{onClick:()=>{window.parent.postMessage("toggle-chat","*")},style:{width:"60px",height:"60px",borderRadius:"50%",backgroundImage:"url(/micah-toggle.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",border:"none",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},"aria-label":"Open chat"})]})};var W=!0;function A(e){let{query:t}=e,n=t.mode||"chat";return"admin"===n?(0,a.jsx)(E,{}):"toggle"===n?(0,a.jsx)(N,{}):(0,a.jsx)(d,{})}}},e=>{e.O(0,[155,347,366,589,636,593,792],()=>e(e.s=2936)),_N_E=e.O()}]);